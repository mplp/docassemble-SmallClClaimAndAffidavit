name: Build docassemble interviews and check DOCX files

on:
  push:
  workflow_dispatch:
  
jobs:
  build-n-check:
    runs-on: ubuntu-latest
    steps:
      - uses: SuffolkLITLab/ALActions/da-build@main
        with:
          python-version: "3.12"
  docx-review:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Needed for git diff comparison
      - name: Diff Word documents
        uses: SuffolkLITLab/ALActions/word_diff@main
        with:
          # Optional: override the base commit if needed
          # base_ref: main
          artifact_name: word-doc-diff
          output_dir: word_diffs
          summary_file: word_diff_summary.md
      - name: Validate DOCX Jinja2 templates
        uses: SuffolkLITLab/ALActions/valid_jinja2@main
        with:
          # Optional: customize artifact and output names
          artifact_name: jinja-validation-report
          output_dir: jinja_validation
          summary_file: jinja_validation_summary.md
